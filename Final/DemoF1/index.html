<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.5.x/dist/aframe-environment-component.min.js"></script>
  <script src="https://unpkg.com/aframe-babia-components/dist/aframe-babia-components.min.js"></script>
  <script src="https://gftruj.github.io/hand.tracking.controls.extras/dist/aframe-hand-tracking-controls-extras.js"></script>
  <script src="https://gftruj.github.io/hand.tracking.controls.extras/components/dist/hand-tracking-controls-extras-components.js"></script>
  <script src="https://unpkg.com/aframe-rounded@^1.0.0/aframe-rounded.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.2.0/dist/aframe-extras.min.js"></script>
  <!-- Añadimos la biblioteca para htmlembed -->
  <script src="https://unpkg.com/aframe-htmlembed-component@latest/dist/build.js"></script>
  <script src="menu.js"></script>
  <script src="initMenu.js"></script>
  <script src="button.js"></script>
  <script src="pressable.js"></script>
  <script src="pinchable.js"></script>
  <script src="size-change.js"></script>
  <script src="slider.js"></script>
</head>
<body>
  <a-scene menu>
    <!-- Assets -->
    <a-assets>
      <img id="sky" src="https://cdn.glitch.global/1f8e0b5c-8472-495a-a6ce-b620a6cdfd40/360-panorama.jpg?v=1745337225916">
      <img id="floor" src="https://cdn.glitch.global/1f8e0b5c-8472-495a-a6ce-b620a6cdfd40/floor-texture.jpg?v=1745337241227">
      <img id="metalic" src="https://cdn.glitch.global/1f8e0b5c-8472-495a-a6ce-b620a6cdfd40/metalic-texture.jpg?v=1745337245682">
    </a-assets>
    
    <!-- Panorama -->
    <a-sky src="#sky"></a-sky>
    
    <!-- Habitación - Paredes, Suelo y Techo (40% más pequeña que la anterior) -->
    <a-entity id="room" position="0 0.5 0">
      <!-- Suelo -->
      <a-plane id="floor2" src="#floor" position="0 0 0" rotation="-90 0 0" width="16.8" height="21" repeat="2 3"></a-plane>
      
      <!-- Techo - beige más oscuro que las paredes -->
      <a-plane id="ceiling" color="#D2B48C" position="0 10 0" rotation="90 0 0" width="16.8" height="21"></a-plane>
      
      <!-- Paredes -->
      <a-entity id="walls">
        <!-- Pared Norte (cristalera) -->
        <a-entity id="glass-wall">
          <!-- Marco superior de la cristalera -->
          <a-box position="0 9.5 -10.5" width="16.8" height="1" depth="0.25" color="#F5F5DC"></a-box>
          
          <!-- Marco inferior de la cristalera -->
          <a-box position="0 0.5 -10.5" width="16.8" height="1" depth="0.25" color="#F5F5DC"></a-box>
          
          <!-- Marco izquierdo de la cristalera -->
          <a-box position="-8.3 5 -10.5" width="0.2" height="10" depth="0.25" color="#F5F5DC"></a-box>
          
          <!-- Marco derecho de la cristalera -->
          <a-box position="8.3 5 -10.5" width="0.2" height="10" depth="0.25" color="#F5F5DC"></a-box>
          
          <!-- Soportes verticales (cada 5.6 unidades para mantener proporción) -->
          <a-box position="-4.2 5 -10.5" width="0.2" height="10" depth="0.25" color="#F5F5DC"></a-box>
          <a-box position="0 5 -10.5" width="0.2" height="10" depth="0.25" color="#F5F5DC"></a-box>
          <a-box position="4.2 5 -10.5" width="0.2" height="10" depth="0.25" color="#F5F5DC"></a-box>
          
          <!-- Paneles de vidrio transparentes (casi invisibles) -->
          <a-entity id="glass-panels">
            <a-plane position="-6.3 5 -10.4" width="4" height="8" color="#ADDEFF" opacity="0.2" material="transparent: true;"></a-plane>
            <a-plane position="-2.1 5 -10.4" width="4" height="8" color="#ADDEFF" opacity="0.2" material="transparent: true;"></a-plane>
            <a-plane position="2.1 5 -10.4" width="4" height="8" color="#ADDEFF" opacity="0.2" material="transparent: true;"></a-plane>
            <a-plane position="6.3 5 -10.4" width="4" height="8" color="#ADDEFF" opacity="0.2" material="transparent: true;"></a-plane>
          </a-entity>
          </a-entity>
          <!-- COMPONENTES PARA LOS GRAFICOS-->
          <a-entity id="data1" babia-queryjson="url: https://raw.githubusercontent.com/mcobom2019/TFG/refs/heads/main/Jsons/usa2.json; path: data1"></a-entity>
          <a-entity id="data2" babia-queryjson="url: https://raw.githubusercontent.com/mcobom2019/TFG/refs/heads/main/Jsons/asia.json; path: data2"></a-entity>
          <a-entity id="data3" babia-queryjson="url: https://raw.githubusercontent.com/mcobom2019/TFG/refs/heads/main/Jsons/continents.json; path: data3"></a-entity>
          <a-entity id="data4" babia-queryjson="url: https://raw.githubusercontent.com/mcobom2019/TFG/refs/heads/main/Jsons/continents2.json; path: data4"></a-entity>
          <a-entity id="data5" babia-queryjson="url: https://raw.githubusercontent.com/mcobom2019/TFG/refs/heads/main/Jsons/USA.json; path: data5"></a-entity>
          <!-- Base para el gráfico bar2Dmap -->
          <a-box id="chart-base" position="-6.1 0.13 9" width="3.5" height="0.25" depth="3" color="#333333" shadow="cast: true; receive: true">
          </a-box>
          
          <!-- Grupo para la placa metálica y su texto (más pequeño) -->
          <a-entity id="metal-plate-with-info" position="-4.7 0.5 7.6" rotation="0 180 0">
            <!-- Placa metálica (mitad del tamaño anterior) -->
            <a-box id="metal-plate" src="#metalic" height="0.5" width="0.5" depth="0.05" position="0 0 0">
            </a-box>
            
            <!-- Texto explicativo sobre la placa metálica (ajustado para la placa más pequeña) -->
            <a-entity id="plate-text"
                    htmlembed="ppu: 512"
                    position="0 0 0.03" 
                    rotation="0 0 0"
                    style="width: 190px; height: 200px; color: white; background-color: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
              <h1 style="text-align: center; color: #ffcc00; font-size: 14px; margin-bottom: 8px;">babia-bubbles Component</h1>
              <p style="font-size: 11px; line-height: 1.3; margin-bottom: 5px;">This component shows a 3 axis bubbles chart.</p>
              <p style="font-size: 11px; line-height: 1.3;">
                Raycaster: <br>
                Get intersection with a bubbles to show the keys and values.
              </p>
            </a-entity>
          </a-entity>
          
          <!-- Gráfico de barras -->
          <a-entity id="bar2Dmap" 
                  babia-bars="legend: true; axis: true; heightMax: 15; from: data1; x_axis: date; height: deaths"
                  position="-5.25 0.28 9" 
                  rotation="0 180 0" 
                  scale="0.25 0.25 0.25">
          </a-entity>
        
        <!-- Gráfico de DONUT -->
        <a-box id="chart-base2" position="6.1 0.13 9" width="3.5" height="0.25" depth="3" color="#333333" shadow="cast: true; receive: true">
          </a-box>
          
          <!-- Grupo para la placa metálica y su texto (más pequeño) -->
          <a-entity id="metal-plate-with-info2" position="4.7 0.5 7.6" rotation="0 180 0">
            <!-- Placa metálica (mitad del tamaño anterior) -->
            <a-box id="metal-plate2" src="#metalic" height="0.5" width="0.5" depth="0.05" position="0 0 0">
            </a-box>
            
            <!-- Texto explicativo sobre la placa metálica (ajustado para la placa más pequeña) -->
            <a-entity id="plate-text2"
                    htmlembed="ppu: 512"
                    position="0 0 0.03" 
                    rotation="0 0 0"
                    style="width: 190px; height: 200px; color: white; background-color: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
              <h1 style="text-align: center; color: #ffcc00; font-size: 14px; margin-bottom: 8px;">babia-doughnut Component</h1>
              <p style="font-size: 11px; line-height: 1.3; margin-bottom: 5px;">This component shows a doughnut chart.</p>
              <p style="font-size: 11px; line-height: 1.3;">
                Raycaster: <br>Get intersection with a slice to show the value.
              </p>
            </a-entity>
          </a-entity>
          
          <!-- Gráfico donut -->
          <a-entity id="doughnut" babia-doughnut="legend: true; palette: pearl; from: data2; key: country; size: cases"
              position="5.75 1.8 9" rotation="90 20 0"  scale="1 1 1"></a-entity>
        
        <!-- Gráfico de BUBBLES -->
        <a-box id="chart-base3" position="0 0.13 9" width="3.5" height="0.25" depth="3" color="#333333" shadow="cast: true; receive: true">
          </a-box>
          
          <!-- Grupo para la placa metálica y su texto (más pequeño) -->
          <a-entity id="metal-plate-with-info3" position="-1.2 0.5 7.6" rotation="0 180 0">
            <!-- Placa metálica (mitad del tamaño anterior) -->
            <a-box id="metal-plate3" src="#metalic" height="0.5" width="0.5" depth="0.05" position="0 0 0">
            </a-box>
            
            <!-- Texto explicativo sobre la placa metálica (ajustado para la placa más pequeña) -->
            <a-entity id="plate-text3"
                    htmlembed="ppu: 512"
                    position="0 0 0.03" 
                    rotation="0 0 0"
                    style="width: 190px; height: 200px; color: white; background-color: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
              <h1 style="text-align: center; color: #ffcc00; font-size: 14px; margin-bottom: 8px;">babia-bubbles Component</h1>
              <p style="font-size: 11px; line-height: 1.3; margin-bottom: 5px;">This component shows a 3 axis bubbles chart.</p>
              <p style="font-size: 11px; line-height: 1.3;">
                Raycaster: <br>Get intersection with a bubbles to show the keys and values.
              </p>
            </a-entity>
          </a-entity>
          
          <!-- Gráfico bubbles -->
          <a-entity id="bubbles" babia-bubbles="legend: true; palette: ubuntu; radiusMax: 2.2; heightMax: 30; from: data3; x_axis: country; z_axis: continentExp; height: deaths; radius: cases"
              position="1.5 0.28 10" rotation="0 180 0" scale="0.04 0.04 0.04"></a-entity>
        
        <!-- Gráfico de CYLS -->
        <a-box id="chart-base4" position="-6.5 0.13 -1" rotation="0 90 0" width="3.5" height="0.25" depth="3" color="#333333" shadow="cast: true; receive: true">
          </a-box>
          
          <!-- Grupo para la placa metálica y su texto (más pequeño) -->
          <a-entity id="metal-plate-with-info4" position="-5.1 0.5 -2.3" rotation="0 90 0">
            <!-- Placa metálica (mitad del tamaño anterior) -->
            <a-box id="metal-plate4" src="#metalic" height="0.5" width="0.5" depth="0.05" position="0 0 0">
            </a-box>
            
            <!-- Texto explicativo sobre la placa metálica (ajustado para la placa más pequeña) -->
            <a-entity id="plate-text4"
                    htmlembed="ppu: 512"
                    position="0 0 0.03" 
                    rotation="0 0 0"
                    style="width: 190px; height: 200px; color: white; background-color: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
              <h1 style="text-align: center; color: #ffcc00; font-size: 14px; margin-bottom: 8px;">babia-cyls Component</h1>
              <p style="font-size: 11px; line-height: 1.3; margin-bottom: 5px;">This component shows a 2 axis cylinder chart.</p>
              <p style="font-size: 11px; line-height: 1.3;">
                Raycaster: <br>Get intersection with a cylinder to show the key and value.
              </p>
            </a-entity>
          </a-entity>
          
          <!-- Gráfico cyls -->
          <a-entity id="cylinder" babia-cyls="legend: true; axis: true; palette: sunset; heightMax: 15; x_axis: country; height: cases; radius: deaths; from: data4"
            position="-6.75 0.275 -2.5" rotation="0 -90 0" scale="0.12 0.4 0.18"></a-entity>
        
        <!-- Gráfico de BAR3D -->
        <a-box id="chart-base5" position="6.5 0.13 -1" rotation="0 90 0" width="3.5" height="0.25" depth="3" color="#333333" shadow="cast: true; receive: true">
          </a-box>
          
          <!-- Grupo para la placa metálica y su texto (más pequeño) -->
          <a-entity id="metal-plate-with-info5" position="5.1 0.5 -2.3" rotation="0 -90 0">
            <!-- Placa metálica (mitad del tamaño anterior) -->
            <a-box id="metal-plate5" src="#metalic" height="0.5" width="0.5" depth="0.05" position="0 0 0">
            </a-box>
            
            <!-- Texto explicativo sobre la placa metálica (ajustado para la placa más pequeña) -->
            <a-entity id="plate-text5"
                    htmlembed="ppu: 512"
                    position="0 0 0.03" 
                    rotation="0 0 0"
                    style="width: 190px; height: 200px; color: white; background-color: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
              <h1 style="text-align: center; color: #ffcc00; font-size: 14px; margin-bottom: 8px;">babia-barsmap Component</h1>
              <p style="font-size: 11px; line-height: 1.3; margin-bottom: 5px;">This component shows a 3 axis bar chart.</p>
              <p style="font-size: 11px; line-height: 1.3;">Raycaster: <br>Get intersection with a bar to show the keys and values.</p>
            </a-entity>
          </a-entity>
          
          <!-- Gráfico bar3D -->

           <a-entity id="3dbar" babia-barsmap='x_axis: key; z_axis: key2; height: size; legend: true; palette: bussiness; animation: true;
                  heightMax:35; data:[{"key":"David","key2":"2019","size":90},{"key":"David","key2":"2018","size":8},{"key":"David","key2":"2017","size":70},{"key":"David","key2":"2016","size":65},{"key":"David","key2":"2015","size":5},{"key":"Pete","key2":"2011","size":80},{"key":"Pete","key2":"2014","size":7},{"key":"Josh","key2":"2016","size":65},{"key":"Josh","key2":"2015","size":55},{"key":"Jesus","key2":"2016","size":90},{"key":"Jesus","key2":"2011","size":80},{"key":"Jesus","key2":"2014","size":75},{"key":"Jesus","key2":"2016","size":60},{"key":"Jesus","key2":"2015","size":5},{"key":"Jesus","key2":"2016","size":95},{"key":"Steve","key2":"2016","size":90},{"key":"Steve","key2":"2017","size":8},{"key":"Steve","key2":"2014","size":7},{"key":"Steve","key2":"2013","size":60},{"key":"Moreno","key2":"2015","size":45},{"key":"Jesus","key2":"2019","size":100},{"key":"Pete","key2":"2019","size":10}]'
                    position="6.75 0.275 0" rotation="0 180 0" scale="0.2 0.2 0.2"></a-entity>



        <a-box id="chart-base6" position="0 0.13 -5" rotation="0 90 0" width="3.5" height="0.25" depth="3" color="#333333" shadow="cast: true; receive: true">
          </a-box>
          
          <!-- Grupo para la placa metálica y su texto (más pequeño) -->
          <a-entity id="metal-plate-with-info6" position="5.1 0.5 -2.3" rotation="0 -90 0">
            <!-- Placa metálica (mitad del tamaño anterior) -->
            <a-box id="metal-plate6" src="#metalic" height="0.5" width="0.5" depth="0.05" position="0 0 0">
            </a-box>
            
            <!-- Texto explicativo sobre la placa metálica (ajustado para la placa más pequeña) -->
            <a-entity id="plate-text6"
                    htmlembed="ppu: 512"
                    position="0 0 0.03" 
                    rotation="0 0 0"
                    style="width: 190px; height: 200px; color: white; background-color: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
              <h1 style="text-align: center; color: #ffcc00; font-size: 14px; margin-bottom: 8px;">babia-barsmap Component</h1>
              <p style="font-size: 11px; line-height: 1.3; margin-bottom: 5px;">This component shows a 3 axis bar chart.</p>
              <p style="font-size: 11px; line-height: 1.3;">Raycaster: <br>Get intersection with a bar to show the keys and values.</p>
            </a-entity>
          </a-entity>
        
        <!-- Pared Sur (beige) -->
        <a-box id="south-wall" position="0 5 10.5" width="16.8" height="10" depth="0.25" color="#F5F5DC"></a-box>
        
        <!-- Pared Este (beige) -->
        <a-box id="east-wall" position="8.4 5 0" width="0.25" height="10" depth="21" color="#F5F5DC"></a-box>
        
        <!-- Pared Oeste (beige) -->
        <a-box id="west-wall" position="-8.4 5 0" width="0.25" height="10" depth="21" color="#F5F5DC"></a-box>
      </a-entity>
    </a-entity>
    
    <!-- Mantener componentes originales -->
    <a-entity id="leftHand" hand-tracking-controls="hand: left" hand-tracking-grab-controls="hand: left">
      <a-entity id="maximizeButton" button="label: noLabel; primitive: cylinder; width: 0.1; color: #a9825a" position="0 0.025 -0.01" visible="false"></a-entity>
    </a-entity>
    <a-entity id="rightHand" hand-tracking-controls="hand: right" hand-tracking-grab-controls="hand: right"></a-entity>
    <a-entity>
      <a-entity cursor="fuse: false; rayOrigin: mouse;" raycaster="objects: .clickable"></a-entity>
    </a-entity>
    
    <!-- Luces -->
    <a-entity id="luz1" light="color: #fff; type: ambient; intensity: 0.7"></a-entity>
    <a-entity id="luz2" light="type: directional; color: #FFF; intensity: 0.7; castShadow: true" position="-1 1 -12" rotation="0 0 0"></a-entity>
  </a-scene>
</body>
</html>